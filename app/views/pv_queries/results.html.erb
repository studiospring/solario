<% content_for :body_id do %>
index<% end %>

<%= provide(:title, 'Results' ) %>
<h1>Results</h1>
<p id="notice"><%= notice %></p>
<table class="table">
  <caption></caption>
  <colgroup>
    <col id="column1" />
    <col id="column2" />
  </colgroup>
  <tbody>
    <tr>
      <td>Postcode:</td>
      <td><%= @pv_query.postcode.pcode %></td>
    </tr>
    <% @pv_query.panels.each_with_index do |panel, index| %>
      <tr>
        <td>Panel <%= index + 1 %></td>
        <td></td>
      </tr>
      <tr>
        <td>Tilt:</td>
        <td><%= panel.tilt %>&deg;</td>
      </tr>
      <tr>
        <td>Bearing:</td>
        <td><%= panel.bearing %>&deg;</td>
      </tr>
      <tr>
        <td>Size:</td>
        <td><%= panel.panel_size %> m<sup>2</sup></td>
      </tr>
    <% end %>
  </tbody>
</table>
<p>@output_pa: <%= @output_pa %></p>
<table class="table table-striped table-condensed">
  <caption>caption</caption>
  <colgroup>
    <col />
    <col />
  </colgroup>
  <thead>
    <tr>
      <th scope="col">Time</th>
      <th scope="col">Jan</th>
      <th scope="col">Feb</th>
      <th scope="col">Mar</th>
      <th scope="col">Apr</th>
      <th scope="col">May</th>
      <th scope="col">Jun</th>
      <th scope="col">Jul</th>
      <th scope="col">Aug</th>
      <th scope="col">Sep</th>
      <th scope="col">Oct</th>
      <th scope="col">Nov</th>
      <th scope="col">Dec</th>
    </tr>
  </thead>
  <tbody>
    <% 15.times do |i| %>
      <tr>
        <td><%= 6 + i %></td>
        <% 12.times do %>
          <td><%= @output_pa_array.shift %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
<h3>Total panel output per annum, averaged over the panel's lifetime</h3>
<%= content_tag :div, id: "output_pa", data: {datapoints: @output_pa} do %>
  Add js error message if @output_pa is an empty array
  Javascript is required to view this graph.
<% end %>
